<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel do Treinador - Rafael</title>
    <!-- Importação do Bootstrap 5 e Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <!-- CSS Global -->
    <link rel="stylesheet" href="../css/style.css">

    <!-- Scripts Globais (Firebase Modular) -->
    <script type="module" src="../js/app_global.js?v=2"></script>
    <script type="module" src="../js/dashboard.js?v=3"></script>

    <style>
        /* Estilos específicos para o conteúdo de cada dia no editor */
        .day-content {
            display: none;
            padding: 1.5rem;
            background: white;
            border-radius: 0 0 24px 24px;
            border: 1px solid var(--border);
            border-top: none;
        }

        .exercise-row {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            padding: 1rem;
            border-radius: 12px;
            margin-bottom: 1rem;
            transition: all 0.2s;
        }

        .exercise-row:hover {
            border-color: var(--primary);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .exercise-inputs {
            display: grid;
            grid-template-columns: 1fr;
            /* Campos um em baixo do outro */
            gap: 1rem;
        }

        @media (max-width: 600px) {
            .exercise-inputs {
                grid-template-columns: 1fr 1fr;
            }
        }

        .day-content.active {
            display: block;
        }

        /* Modais com efeito Glassmorphism */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(15, 23, 42, 0.4);
            backdrop-filter: blur(8px);
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: var(--glass-bg);
            backdrop-filter: var(--glass-blur);
            padding: 2.5rem;
            border: 1px solid var(--glass-border);
            width: 90%;
            max-width: 800px;
            margin: 5% auto;
            border-radius: 28px;
            box-shadow: var(--shadow-lg);
            position: relative;
            animation: slideUp 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes slideUp {
            from {
                transform: translateY(30px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .close {
            position: absolute;
            right: 1.5rem;
            top: 1.5rem;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-muted);
            transition: color 0.2s;
        }

        .close:hover {
            color: var(--danger);
        }

        /* Toast de Notificação */
        #toast {
            visibility: hidden;
            min-width: 250px;
            background-color: var(--success);
            color: #fff;
            text-align: center;
            border-radius: 8px;
            padding: 16px;
            position: fixed;
            z-index: 1000;
            left: 50%;
            bottom: 30px;
            transform: translateX(-50%);
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        #toast.show {
            visibility: visible;
            animation: fadein 0.5s, fadeout 0.5s 2.5s;
        }

        @keyframes fadein {
            from {
                bottom: 0;
                opacity: 0;
            }

            to {
                bottom: 30px;
                opacity: 1;
            }
        }

        @keyframes fadeout {
            from {
                bottom: 30px;
                opacity: 1;
            }

            to {
                bottom: 0;
                opacity: 0;
            }
        }
    </style>
</head>

<body>

    <header class="container">
        <div class="app-header">
            <div>
                <h1 style="color: var(--primary);">Painel <span
                        style="font-weight: 300; color: var(--text-dark);">Treinador</span></h1>
                <p style="font-size: 0.9rem; color: var(--text-muted);">Olá, <span id="trainerName"
                        style="font-weight: 600; color: var(--text-dark);">...</span></p>
            </div>
            <div style="display:flex; gap:0.75rem;">
                <!-- Configurações removidas -->
                <button onclick="window.fazerLogout()" class="btn btn-danger btn-sm">Sair</button>
            </div>
        </div>
    </header>

    <main class="container">

        <!-- Seção: Gerenciamento de Alunos -->
        <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 2rem;">
                <div>
                    <h2 style="font-size: 1.5rem; margin-bottom: 0.25rem;">Meus Alunos</h2>
                    <p style="color: var(--text-muted); font-size: 0.9rem;">Gerencie seus alunos e treinos.</p>
                </div>
                <button onclick="toggleFormAluno()" class="btn btn-primary" style="padding: 0.6rem 1.25rem;">+ Novo
                    Aluno</button>
            </div>

            <!-- Formulário para cadastrar novo aluno (escondido por padrão) -->
            <div id="formNovoAluno"
                style="display: none; background: rgba(248, 250, 252, 0.8); border: 1px solid var(--border); padding: 1.5rem; border-radius: 20px; margin-bottom: 2rem; animation: slideDown 0.3s ease;">
                <h3 style="margin-bottom: 1.5rem; font-size: 1.1rem;">Cadastrar Novo Aluno</h3>
                <div class="add-student-form"
                    style="display: flex; flex-direction: column; gap: 1rem; max-width: 450px;">
                    <div class="mb-3">
                        <label class="form-label small fw-bold text-muted text-uppercase mb-1">Nome Completo</label>
                        <div class="input-group">
                            <span class="input-group-text bg-white border-end-0"><i
                                    class="bi bi-person text-primary"></i></span>
                            <input type="text" id="novoNome" class="form-control border-start-0"
                                placeholder="Ex: João Silva">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label small fw-bold text-muted text-uppercase mb-1">Usuário (Login)</label>
                        <div class="input-group">
                            <span class="input-group-text bg-white border-end-0"><i
                                    class="bi bi-at text-primary"></i></span>
                            <input type="text" id="novoLogin" class="form-control border-start-0"
                                placeholder="Ex: joao.silva">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label small fw-bold text-muted text-uppercase mb-1">Senha</label>
                        <div class="input-group">
                            <span class="input-group-text bg-white border-end-0"><i
                                    class="bi bi-key text-primary"></i></span>
                            <input type="password" id="novaSenha" class="form-control border-start-0"
                                placeholder="Ex: 123456">
                        </div>
                    </div>
                    <div class="d-flex flex-column flex-sm-row gap-2 mt-2">
                        <button onclick="adicionarAluno()" class="btn btn-primary w-100">
                            <i class="bi bi-check-circle me-1"></i> Confirmar Cadastro
                        </button>
                        <button onclick="toggleFormAluno()" class="btn btn-light border w-100">
                            <i class="bi bi-x-circle me-1"></i> Cancelar
                        </button>
                    </div>
                </div>
            </div>

            <!-- Campo de busca instantânea -->
            <div style="margin-bottom: 1rem;">
                <input type="text" id="inputBusca" placeholder="Pesquisar aluno por nome..." onkeyup="filtrarAlunos()"
                    style="width: 100%;">
            </div>

            <!-- Tabela com a lista de alunos -->
            <div class="table-container">
                <table id="tabelaAlunos">
                    <thead>
                        <tr>
                            <th>ALUNO</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <!-- Modal: Editor de Treinos -->
        <!-- Exibido ao clicar em 'Treinos' na lista de alunos -->
        <div id="modalTreino" class="card"
            style="display: none; border: 2px solid var(--primary); position: fixed; top: 5%; left: 5%; width: 90%; height: 90%; overflow-y: auto; z-index: 100;">
            <div class="app-header"
                style="box-shadow: none; padding: 1.5rem 2rem; margin-bottom: 1rem; background: rgba(255, 255, 255, 0.4); backdrop-filter: blur(12px); border-bottom: 1px solid var(--border); position: sticky; top: 0; z-index: 10; border-radius: 20px 20px 0 0;">
                <h3>Editando Treino de: <span id="alunoEmEdicao" style="color: var(--primary);">...</span></h3>
                <button onclick="salvarEFechar()" class="btn btn-sm">Fechar e Salvar</button>
            </div>

            <!-- Abas para seleção do dia da semana (Carousel fixo via style.css) -->
            <div class="days-carousel">
                <div class="day-tab active" onclick="mudarDia('segunda', this)">Segunda</div>
                <div class="day-tab" onclick="mudarDia('terca', this)">Terça</div>
                <div class="day-tab" onclick="mudarDia('quarta', this)">Quarta</div>
                <div class="day-tab" onclick="mudarDia('quinta', this)">Quinta</div>
                <div class="day-tab" onclick="mudarDia('sexta', this)">Sexta</div>
                <div class="day-tab" onclick="mudarDia('sabado', this)">Sábado</div>
                <div class="day-tab" onclick="mudarDia('domingo', this)">Domingo</div>
            </div>

            <!-- Container onde os exercícios do dia selecionado serão renderizados -->
            <div id="containerDias"></div>
        </div>

        <!-- Modal Configurações removido -->

        <!-- Modal: Editar Aluno -->
        <div id="modalEditarAluno" class="card"
            style="display: none; border: 2px solid var(--primary); position: fixed; top: 20%; left: 50%; width: 400px; transform: translateX(-50%); z-index: 101;">
            <h3>Editar Aluno</h3>
            <p style="margin-bottom: 1rem; font-size: 0.9rem; color: var(--text-muted);">Altere as informações do aluno.
            </p>

            <div class="mb-3">
                <label class="form-label fw-bold text-muted small text-uppercase">Nome do Aluno</label>
                <div class="input-group">
                    <span class="input-group-text bg-white border-end-0"><i
                            class="bi bi-person text-primary"></i></span>
                    <input type="text" id="editNome" class="form-control border-start-0" placeholder="Nome do Aluno">
                </div>
            </div>
            <div class="mb-3">
                <label class="form-label fw-bold text-muted small text-uppercase">Login</label>
                <div class="input-group">
                    <span class="input-group-text bg-white border-end-0"><i class="bi bi-at text-primary"></i></span>
                    <input type="text" id="editLogin" class="form-control border-start-0" placeholder="Login">
                </div>
            </div>
            <div class="mb-3">
                <label class="form-label fw-bold text-muted small text-uppercase">Nova Senha</label>
                <div class="input-group">
                    <span class="input-group-text bg-white border-end-0"><i class="bi bi-key text-primary"></i></span>
                    <input type="text" id="editSenha" class="form-control border-start-0"
                        placeholder="Deixe em branco para manter">
                </div>
            </div>

            <div class="d-flex gap-2 mt-4">
                <button onclick="salvarEdicaoAluno()" class="btn btn-primary w-100">
                    <i class="bi bi-floppy me-1"></i> Salvar Alterações
                </button>
                <button onclick="fecharEdicaoAluno()" class="btn btn-light border w-100">
                    <i class="bi bi-x-circle me-1"></i> Cancelar
                </button>
            </div>
        </div>

    </main>

    <div id="toast">Operação concluída!</div>

</body>

</html>